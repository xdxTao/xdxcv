import{aW as i,d as p,r as c,M as m,D as v,aX as h,o as I,c as k,p as e,a1 as w,a2 as T,a3 as S}from"./index-82JA-Thp.js";const x="/assets/login1-OZMmt_MH.png";function y(){return i.get("/login/ticket")}function M(o){return i.get(`/login/cycle?ticket=${o}`)}function q(){return i.get("/login/user-info")}const l=o=>(w("data-v-60fd6f97"),o=o(),T(),o),B={class:"card"},b=l(()=>e("div",{class:"left"},[e("img",{src:x})],-1)),A={class:"right"},C=l(()=>e("div",{class:"title"},[e("span",null,"微信扫码登录注册")],-1)),N={class:"img"},O=["src"],U=l(()=>e("div",{class:"bottom"}," 登录即视为同意 用户服务协议、隐私政策 ",-1)),V=p({__name:"index",setup(o){const n=c("https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket="),r=c(""),g=c(null);let s=null,a=null;const _=m();async function f(){console.log("dsgsgsfgdfgdfgdfgf");const t=await y();n.value=n.value+t.data,r.value=t.data}const d=async()=>{const t=await M(r.value);if(t.code!=400&&(g.value=t.data,t.code==200)){window.localStorage.setItem("token",t.data),clearInterval(s),clearTimeout(a),q().then(u=>{window.localStorage.setItem("userInfo",JSON.stringify(u.data))}),_.push("/myCV");return}};return s=setInterval(d,1e3),a=setTimeout(()=>{clearInterval(s),console.log("Stopped calling aa API after 60 seconds.")},60*1e3),v(()=>{f(),d()}),h(()=>{clearInterval(s),clearTimeout(a)}),(t,u)=>(I(),k("div",B,[b,e("div",A,[C,e("div",N,[e("img",{src:n.value},null,8,O)]),U])]))}}),E=S(V,[["__scopeId","data-v-60fd6f97"]]);export{E as default};
